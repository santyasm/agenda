<%- include('../includes/header') %> 
<%- include('../includes/navbar') %> 
<%- include('../includes/msg') %>

<div class="col-lg-11 m-4">
  <h1 class="display-1 text-center mx-auto">Login</h1>
  <p class="text-center lead">Faça login ou crie sua conta abaixo</p>

  <div class="row mt-5 d-flex">
    <div class="col-lg-6 col-sm-12 mb-3 text-center">
      <h4>Faça seu cadastro</h4>
      <p>Se você ainda não possui conta, preencha o formulásrio abaixo.</p>
      <form method="post" action="/login/register">
        <div class="form-group">
          <label class="form-label">Nome</label>
          <input
            type="text"
            class="form-control form-control-lg form-control-sm"
            name="name"
          />
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <input
            type="email"
            class="form-control form-control-lg form-control-sm"
            name="email"
          />
        </div>
        <div class="form-group">
          <label class="form-label">Senha</label>
          <input
            type="password"
            class="form-control form-control-lg form-control-sm"
            name="password"
          />
        </div>
        <div class="form-group">
          <label class="form-label">Confirme sua senha</label>
          <input
            type="password"
            class="form-control form-control-lg form-control-sm"
            name="confirmpass"
          />
        </div>
        <button type="submit" class="btn btn-primary mt-2">Cadastrar</button>
      </form>
    </div>

    <div class="col-lg-6 col-sm-12 mb-3 text-center">
      <h4>Entre na sua conta</h4>
      <p>Se você já possui conta, faça login abaixo.</p>
      <form method="post" action="/login">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">

        <div class="form-group">
          <label class="form-label">Email</label>
          <input
            type="email"
            class="form-control form-control-lg form-control-sm"
            name="email"
            id="campo1"
          />
        </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <input
            type="password"
            class="form-control form-control-lg form-control-sm mb-2"
            name="password"
            id="campo2"
          />

          <input class="form-check-input" type="checkbox" value="" id="showPass">
          <label class="form-check-label" for="flexCheckDefault">
            Mostrar senha
          </label>

        </div>
        <button class="btn btn-primary mt-2" id="btnLogin">Entrar</button>
      </form>
    </div>

    <script>
      const showPass = document.getElementById("showPass");
      const campoSenha = document.getElementById("campo2");

      showPass.addEventListener("change", () => {
        if(showPass.checked){
          campoSenha.setAttribute("type", "text");
        } else{
          campoSenha.setAttribute("type", "password")
        }
      });

      document.addEventListener("DOMContentLoaded", function () {
        if (localStorage.campo1 || localStorage.campo2) {
          document.getElementById("campo1").value = localStorage.campo1;
          document.getElementById("campo2").value = localStorage.campo2;
        }

        const input1 = document.getElementById("campo1");
        const input2 = document.getElementById("campo2");

        input1.addEventListener("input", function () {
          localStorage.setItem("campo1", input1.value);
        });

        input2.addEventListener("input", function () {
          localStorage.setItem("campo2", input2.value);
        });
      });
    </script>

    <%- include('../includes/footer') %>